fcf.module({name:"fcfDBControls:templates/form.hooks.js",dependencies:[],module:function(){return{hooksProgramableArgument:{errorMessage:function(a_taskInfo){let empty=!0,message="<div><errorheader>"+fcf.t("Invalid form fields")+":</errorheader></div>";return fcf.each(a_taskInfo.args.allErrors,(a_lang,a_errors)=>{fcf.each(a_errors,(a_key,a_errorsInfo)=>{fcf.empty(a_errorsInfo)||fcf.each(a_errorsInfo,(a_key,a_errorInfo)=>{if(fcf.empty(a_errorInfo))return;empty=!1;let view=a_taskInfo.args.views[fcf.find(a_taskInfo.args.views,(k,v)=>a_errorInfo.alias==v.alias)],title=view&&view.title?fcf.pattern(view.title):a_errorInfo.alias;message+="<div><langitem>"+fcf.t("Language")+": "+a_lang+"</langitem></div>",message+="<div><erroritem>&nbsp;&nbsp;&nbsp;&nbsp;"+fcf.t("Field")+" '"+fcf.t(title)+"': "+a_errorInfo.error.message+"</erroritem></div>"})})}),empty?"":message},allErrors:function(a_taskInfo){let result={};return fcf.each(a_taskInfo.args.languages,a_lang=>{result[a_lang]={},fcf.each(a_taskInfo.args.views,(a_key,a_view)=>{let alias=a_view.alias?a_view.alias:a_key;result[a_lang][alias]=[]})}),result},views:function(a_taskInfo){return fcf.getProjection(a_taskInfo.args.projection).fields},language:function(a_taskInfo){return fcf.getContext().get("language")?fcf.getContext().get("language"):fcf.getSystemVariable("fcf:defaultLanguage")},languages:function(a_taskInfo){return fcf.getSystemVariable("fcf:languages")},_values:function(a_taskInfo){let _values={};for(let lang in a_taskInfo.args.languages)_values[lang]={};return fcf.actions().eachAC(_values,a_lang=>{let projection=fcf.getProjection(a_taskInfo.args.projection);return fcf.query({query:{type:"select",language:a_lang,from:a_taskInfo.args.projection,fields:[{field:"*"}],where:[{logic:"and",type:"=",args:[{field:projection.key},{value:a_taskInfo.args.key}]}]}}).then(a_data=>{_values[a_lang]=a_data[0][0]})}).then(()=>_values)}}}}});