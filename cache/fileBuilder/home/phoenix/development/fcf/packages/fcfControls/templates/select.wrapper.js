fcf.module({name:"fcfControls:templates/select.wrapper.js",dependencies:["fcf:NRender/Wrapper.js"],module:function(Wrapper){return class extends Wrapper{constructor(a_initializeOptions){super(a_initializeOptions),this._cbClose=void 0}getActionDomElement(){return fcf.select(this.getDomElement(),"input")[0]}getCurrentData(){var select=fcf.first(fcf.select(this.getDomElement(),"input")),items=this.getArg("items");if(void 0!==select.value)return items[select.value]}showMenu(a_items){var menu=this.getChild("menu");menu.setArg("display","block"),menu.setArg("width",this.getWidthPx()),menu.setArg("titlePattern",this.getArg("titlePattern")),menu.setArg("blank",void 0===a_items&&this.getArg("blank")),menu.setArg("items",a_items||this.getArg("items")),menu.update()}hideMenu(){this.getChild("menu").close()}getEnableButton(a_name,a_value){var buttons=this.getArg("buttons"),button=buttons[fcf.find(buttons,function(k,v){return v.name==name})];if(button)return!!button.enable}setEnableButton(a_name,a_value){var buttons=this.getArg("buttons"),button=buttons[fcf.find(buttons,function(k,v){return v.name==a_name})];if(button){button.enable=a_value,this.setArg("buttons",buttons,!0);var element=this.select("[name='"+button.name+"']")[0];element&&(button.enable?element.removeAttribute("disabled"):element.setAttribute("disabled","disabled"))}}onArgValue(a_value){var data=this.getArg("items")[a_value];this.getActionDomElement().classList.remove(this.getTheme().getDecor().selectSearchModeClass),this.getActionDomElement().value=fcf.pattern(this.getArg("titlePattern"),{value:a_value,data:data}),this.emit("change",{value:a_value,data:data})}onArgData(a_value){var data=a_value;this.getActionDomElement().classList.remove(this.getTheme().getDecor().selectSearchModeClass),this.getActionDomElement().value=fcf.pattern(this.getArg("titlePattern"),{value:this.getArg("value"),data:data}),this.emit("change",{value:this.getArg("value"),data:a_value})}onArgEnable(a_value){this.update()}onArgWidth(a_value){this.update()}onArgSearch(a_value){this.update()}onArgButtons(a_value){this.update()}onArgTitlePattern(a_value){this.update()}onArgItems(a_value){this.update()}onInput(a_event){this.getActionDomElement().classList.add(this.getTheme().getDecor().selectSearchModeClass);var content=this.getActionDomElement().value.toLowerCase(),filtredItems={},patern=this.getArg("titlePattern");fcf.each(this.getArg("items"),function(value,data){-1!=fcf.pattern(patern,{value:value,data:data}).toLowerCase().indexOf(content)&&(filtredItems[value]=data)}),this.showMenu(filtredItems)}onButtonClick(a_event){if(this.getArg("enable")){var name=a_event.target.getAttribute("name"),buttons=this.getArg("buttons"),button=buttons[fcf.find(buttons,function(k,v){return v.name==name})];button&&(void 0===button.enable||button.enable)&&this.emit("button",{button:button.name,target:a_event.target,sender:this})}}onExtend(a_event){this.getArg("enable")&&("none"==this.getChild("menu").getArg("display")?this.showMenu():this.hideMenu(),this.getActionDomElement().focus())}onCloseMenu(){var data=this.getArg("data");this.getActionDomElement().classList.remove(this.getTheme().getDecor().selectSearchModeClass),this.getActionDomElement().value=fcf.pattern(this.getArg("titlePattern"),{value:this.getArg("value"),data:fcf.str(data)})}onChange(a_event){this.getActionDomElement().classList.remove(this.getTheme().getDecor().selectSearchModeClass);var value=a_event.value,items=this.getArg("items");this._setValue(value,items[value]?items[value]:"")}_setValue(a_value,a_data){this.setArg("value",a_value),this.setArg("data",a_data)}}}});